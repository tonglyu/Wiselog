{% extends "base.html" %}
{% block title %}Welcome to WiseLog{% endblock title %}

{% block navbar %}
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <img src="{{ url_for('static', filename='images/logo.svg') }}" height="35" width="35" style="margin-right: 5px">
    <a class="navbar-brand" href="{{ url_for('index') }}">WiseLog</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
            <a class="nav-item nav-link" href="{{ url_for('index') }}">Search</a>
            <!--<a class="nav-item nav-link" href="https://github.com/ZiweiYuan/UnivBoard">Github</a>-->
        </div>
    </div>
</nav>
{% endblock navbar%}

{% block content %}
<section>
    <div class="container-fluid">
        <h1>Hi, {{ user.username }}!</h1>
        <!--{% for post in posts %}-->
        <!--<div><p>{{ post.author.username }} says: <b>{{ post.body }}</b></p></div>-->
        <!--{% endfor %}-->
        {% block map %}
        <div class="col-md-10" id="map-container">
            <div id="map">
            </div>
        </div>
        <script>
            var data = {{ data |tojson }};
            console.log(typeof (data))
            Highcharts.mapChart('map', {
                chart: {
                    map: 'custom/world',
                    borderWidth: 1
                },

                // colors: ['rgba(19,64,117,0.05)', 'rgba(19,64,117,0.2)', 'rgba(19,64,117,0.4)',
                //     'rgba(19,64,117,0.5)', 'rgba(19,64,117,0.6)', 'rgba(19,64,117,0.8)', 'rgba(19,64,117,1)'],

                title: {
                    text: 'Population density by country (/kmÂ²)'
                },

                mapNavigation: {
                    enabled: true
                },
                colorAxis: {
                    type: 'logarithmic',
                    endOnTick: false,
                    startOnTick: true,
                },
                series: [{
                    data: data,
                    joinBy: ['iso-a2', 'country'],
                    animation: true,
                    name: 'Access Count',
                    states: {
                        hover: {
                            color: '#a4edba'
                        }
                    },
                    tooltip: {
                        valueSuffix: 'times'
                    },
                    shadow: false
                }]
            });

        </script>
        {% endblock map%}
    </div>
</section>

{% endblock content%}

